<template>
  <v-card
    rounded="lg"
    prepend-icon="mdi-file-document-outline"
    rel="noopener"
    target="_blank"
    flat
  >
    <template #title>
      <span class="text-info">{{ fileName }}</span>
    </template>
    <template #subtitle>
      <span class="text-grey-darken-1"
        >Documento em anexado em {{ fileCreatedAt }}</span
      >
    </template>
    <template #append>
      <div class="d-flex" style="gap: 0.5rem">
        <v-btn
          v-if="deleteVisible"
          icon
          color="error"
          variant="text"
          @click="emit('delete')"
        >
          <v-icon icon="mdi-delete-outline" />
          <v-tooltip
            activator="parent"
            location="top center"
            content-class="tooltip-background"
          >
            Apagar
          </v-tooltip>
        </v-btn>
        <v-btn
          v-if="viewVisible && isPdfFile"
          icon
          color="success"
          variant="text"
          @click="emit('view')"
        >
          <v-icon icon="mdi-file-eye-outline" />
          <v-tooltip
            activator="parent"
            location="top center"
            content-class="tooltip-background"
          >
            Visualizar PDF
          </v-tooltip>
        </v-btn>
        <v-btn
          v-if="downloadVisible"
          icon
          color="info"
          variant="text"
          @click="emit('download')"
        >
          <v-icon icon="mdi-cloud-arrow-down-outline" />
          <v-tooltip
            activator="parent"
            location="top center"
            content-class="tooltip-background"
          >
            Download
          </v-tooltip>
        </v-btn>
      </div>
    </template>
  </v-card>
  <v-divider />
</template>

<script setup lang="ts">
const props = defineProps({
  fileName: {
    type: String,
    required: true,
  },
  downloadVisible: {
    type: Boolean,
    default: true,
  },
  deleteVisible: {
    type: Boolean,
    default: true,
  },
  viewVisible: {
    type: Boolean,
    default: true,
  },
  fileCreatedAt: {
    type: String,
    required: true,
  },
});

const emit = defineEmits(["delete", "download", "view"]);

// Computed para verificar se Ã© um arquivo PDF
const isPdfFile = computed(() => {
  return props.fileName?.toLowerCase().endsWith(".pdf") || false;
});
</script>

<style scoped></style>
